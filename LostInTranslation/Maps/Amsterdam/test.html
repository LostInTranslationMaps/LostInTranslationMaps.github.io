# Read the provided SVG and wrap it into an editable HTML file so the user can rename station labels.
svg_path = "/mnt/data/AmsterdamMetroWashingtonStyle_(from_2018).svg"
html_path = "/mnt/data/amsterdam_metro_editable.html"

with open(svg_path, "r", encoding="utf-8") as f:
svg_content = f.read()

html_template = f"""
<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Amsterdam Metro â€” Editable Labels</title>
    <style>
        html,
        body {
                {
                margin: 0;
                height: 100%;
                background: #ffffff;
            }
        }

        .wrap {
                {
                display: flex;
                align-items: center;
                justify-content: center;
                padding: 16px;
            }
        }

        /* Ensure the SVG scales nicely without altering the design */
        svg {
                {
                max-width: 100%;
                height: auto;
            }
        }

        /* Subtle helper overlay (does not change the SVG look) */
        .hint {
                {
                position: fixed;
                top: 12px;
                right: 12px;
                background: rgba(255, 255, 255, 0.92);
                border: 1px solid #ddd;
                border-radius: 10px;
                padding: 8px 10px;
                font: 12px/1.4 -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
                user-select: none;
            }
        }

        .hint kbd {
                {
                border: 1px solid #bbb;
                padding: 0 4px;
                border-radius: 4px;
                font-size: 11px;
                background: #f7f7f7;
            }
        }
    </style>
</head>

<body>
    <div class="hint">Click any label to rename. Press <kbd>Esc</kbd> in the prompt to cancel.</div>
    <div class="wrap">
        {svg_content}
    </div>
    <script>
        (function () {
            {
                const svg = document.querySelector('svg');
                if (!svg) return;

                // Make every text node on the SVG clickable for renaming.
                const labels = svg.querySelectorAll('text');
                labels.forEach(function (t) {
                    {
                        t.style.cursor = 'text';
                        t.addEventListener('click', function (ev) {
                            {
                                ev.stopPropagation();
                                const oldVal = this.textContent;
                                const newVal = window.prompt('Rename label:', oldVal);
                                if (newVal !== null) this.textContent = newVal;
                            }
                        });
                    }
                });

                // Optional: prevent accidental drag-select across the map
                svg.style.userSelect = 'none';
            }
        })();
    </script>
</body>

</html>
"""

with open(html_path, "w", encoding="utf-8") as f:
f.write(html_template)

html_path
